## 組み込み関数
### 文字列編

### ■文字の操作

システム上のデータは、多くが数値や文字として扱われます。そのため、文字操作の関数は多く存在します。

ここでは、良く使う文字操作関数を幾つかご紹介します。

** 文字の長さを調べる（strlen/mb_strlen関数）：**

* 文字のバイト数を調べる

  * 変数 = strlen(文字);


* 文字の文字数を調べる

  * 変数 = mb_strlen(文字, 文字コード);

※文字コードは省略可能

```php
<?php
// 文字のバイト数調査
// 半角英数字は1バイトで表現できるので、4文字
echo strlen('ABCD');
// 全角文字は、文字コードによりまちまち
echo strlen('あいうえ');

// 文字の文字数調査
// 半角英数字で４文字
echo mb_strlen('ABCD');
// 全角文字で4文字
echo mb_strlen('あいうえ');
```

** 部分的に文字を取得（substr/mb_substr関数）：**

* 部分的に文字をバイト数で取得

  * 変数 = substr(文字, 開始位置, 取得バイト数);

※取得バイト数は省略可能


* 部分的に文字を文字数で取得

  * 変数 = mb_substr(文字, 開始位置, 取得文字数, 文字コード);

※取得文字数、文字コードは省略可能

開始位置は、0が先頭。


```php
<?php

 // 部分文字列の取得
// 3は4バイト目からを意味し、取得バイト数は2なので
// 取得できるのは、「de」
 echo substr('abcdef', 3, 2);

// 1は２文字目からを意味し、取得文字数は1なので
// 取得できるのは、「い」
 echo mb_substr('あいう', 1, 1);
```

**文字の空白除去（trim）：**

* 文字の前後の空白を取り除く

  * 変数 = trim(文字);


**文字の比較（strcmp）：**

* 文字を比較し、同一の場合0、違う場合は0以外

  * 変数 = strcmp(文字1, 文字2);


```php
<?php

// 文字の前後の半角スペースを除去します
// 半角スペースが取り除かれ、「sample」が表示
echo trim('     sample  ');

// 文字列比較
$sample = 'ABCD';
// 同じ文字の場合
echo strcmp('ABCD', $sample);
// 違う文字の場合
echo strcmp('abcd', $sample);

```

**文字が含まれる位置を取得（strpos）：**

* 指定文字の位置を取得
  * 変数 = strpos(対象文字, 指定文字);
  * ※mb_strposもあります。


* 文字の指定文字による切出し（strstr）：
  * 指定文字を検索し、以降の文字を取得
  * 変数 = strstr(対象文字, 指定文字);
  * ※mb_strstrもあります。

```php
<?php

// 文字から指定文字の位置を取得
// 「abcde」から「cd」を検索
// 2と表示
echo strpos('abcde', 'cd');

// 文字から指定文字以降を取得
// 「@groove-gear.jp」と表示
echo strstr('soeda-r@groove-gear.jp', '@');
```

**文字の置換（str_replace）：**

* 指定文字を別の文字へ置き換え

変数 = str_replace(検索文字, 置換文字, 対象文字);

```php
<?php

// 指定文字列を別の文字へ置換
// 「My name is aoki.」と表示
echo str_replace('soeda', 'aoki', 'My name is soeda.');
```

### ■文字と配列

プログラム上で扱う文字の中には、特定の文字を区切りとして複数の情報を保持している場合があります。有名なものではCSV（Comma Separated Value）と呼ばれる形式があります。

「,」を区切りとして、複数の情報を連結したテキスト情報をCSVと呼びます。

この様な形式の情報を扱うのに適した関数も用意されています。

** 特定の文字で区切って配列化（explode）： **

変数 = explode(区切り文字, 対象文字);


```php
<?php

// おでんの具がカンマ区切りで連結されています。
$data_txt = 'ちくわ,はんぺん,たまご,ウィンナー巻き';

// explodeを使って、配列化
$oden = explode(',', $data_txt);

// 取得内容を確認してみましょう
var_dump($oden);
```
