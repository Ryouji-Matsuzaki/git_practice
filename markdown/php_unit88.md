## データベース基礎
### XAMPP(MAMP)とSQL

データベースを利用するための環境設定と、MySQLへの接続方法を記載しています。 
**該当スライドには図説があるので、参考にしてみてください。**

### ■Windowsの方 - XAMPPからMySQLを起動

XAMPPをインストールすると、一緒にMySQLがセットアップされます。
ここからは、このMySQLを利用して学習を進めます。

MySQLの利用方法を学習しましょう。

まずは、XAMPP Control Panelを起動してください。

### ■(XAMPP)データベースの文字コード設定

MySQLの初期設定では、データベースの文字コードが「latin1」になっています。
このままではデータベースとプログラムが正しく連携できません。

MySQLの設定ファイルを開き、文字コードの設定を行いましょう。

パネルにある「Config」ボタンを押してください。
テキストが表示されるはずです。

### ■(XAMPP)設定ファイルの編集

文字コードの設定は、3カ所必要です。

まずは、[client]と[mysqld]の文字コードを設定しましょう。
下記をそれぞれの括りに追記してください。

**[client]**
**default-character-set=utf8**

**[mysqld]**
**character-set-server=utf8**


[mysqld]の設定が、character-set-server=utf8になっている事に注意してください。
[client]と同じではありません。

最後に、[mysql]の設定を行います。

**[mysql]**
**default-character-set=cp932**

設定が終わったら、テキストを上書き保存して閉じてください。

### ■(XAMPP)MySQLの起動

設定ファイルを保存したら、データベースを起動しましょう。
コントロールパネルのMySQLの行の「Start」ボタンを押してください。

起動に成功した場合、右記の様にボタンの表示が「Stop」に変わります。

### ■(XAMPP)コマンドプロンプトの起動

MySQLが起動したら、ここからはコマンドラインからの操作になります。
パネルの「Shell」ボタンを押し、コマンドプロンプトを起動してください。

このコマンドプロンプトは、Macではターミナルと呼ばれています。

### ■(XAMPP)MySQLへの接続

コマンドプロンプトを起動しただけでは、MySQLへは接続していません。
明示的に接続してあげる必要があります。
コマンドプロンプトで、下記の様に入力し、Enterを押してください。

``` MySQL
MySQLへの接続:
  mysql -h localhost -u root
```

「-」が付いている部分はオプションを意味します。

* -h
ホスト（アドレス）の指定

* -u
接続アカウント


### ■(XAMPP)アカウントの作成

MySQLが接続できたら、自分のアカウントを作成しましょう。
アカウント作成は、下記の様に実施します。

**MySQLのアカウント作成：**

* CREATE USER
'ユーザー名'@'localhost'


* IDENTIFIED BY
'パスワード';

入力が終わったら、Enterを押してください。
成功すると、今後はこのアカウントでMySQLへの接続が可能になります。

### ■(XAMPP)データベースの作成

次に、作成したアカウントで利用できるデータベースを作成します。
MySQL自体をデータベースと言いますが、ここで言うデータベースは情報を管理するための大きな括りです。

MySQLの中には、複数のデータベースを作成する事が可能です。

``` MySQL
データベースを作成するSQL文:
  CREATE DATABASE データベース名;
```

### ■(XAMPP)データベースの操作権限を設定

先ほど作成したアカウントは、作成したデータベースを操作できません。
アカウントがデータベースを操作できるようになるには、操作権限を設定する必要があります。


``` MySQL
アカウントにデータベースの操作権限を設定:
  GRANT ALL ON データベース名.* TO 'ユーザー名'@'localhost';
```

成功すると、作成したアカウントでデータベースの操作が可能になります。

### ■(XAMPP)作成したアカウントで再度ログイン

先ほど作成したアカウントで再度MySQLに接続しなおします。
MySQLとの接続を切るには、exitコマンドを利用してください。

``` MySQL
MySQLの切断:
  exit;
```

切断したら、rootと同様に先ほど作成したアカウント名でMySQLへ接続してください。

### ■(XAMPP)データベースの選択

ログインしたら、操作するデータベースを選択します。
先ほど作成したデータベースを選択しましょう。
選択のコマンドは、下記です。

``` MySQL
データベースの選択:
  USE データベース名;
```

### ■(XAMPP)SQL文の実施

データベースを選択したら、SQL文を駆使してデータの操作を行いましょう。
まず、テーブルを作成してみてください。
テーブルを作成するSQL文は下記です。

``` MySQL
テーブルを作成するSQL文:
  CREATE TABLE
    テーブル名
  (カラム名 データ型, カラム名 データ型, …);
```

カラムの数に制限はありません。
必要なだけカラムを作成する事が可能です。

&nbsp;

---

### ■Macの方 - MAMPからMySQLを起動

MAMPをインストールすると、一緒にMySQLがセットアップされます。
ここからは、このMySQLを利用して学習を進めます。

MySQLの利用方法を学習しましょう。

まずは、MAMPを起動してください。

### ■(MAMP)MySQLの起動

MySQLを起動しましょう。

MySQLを起動するには、「サーバを起動」を押してください。
ApacheサーバーとMySQL Serverの両方が起動します。

起動に成功すると、「サーバを起動」が「サーバを停止」に変わり、右上のApache サーバーとMySQL Serverの横にあるランプが緑色に点灯します。

### ■(MAMP)ターミナルの起動

MySQLが起動したら、ここからはターミナルからの操作になります。

まずは、ターミナルを起動し、下記コマンドでフォルダに移動してください。

``` MySQL
移動コマンド:
  cd /Applications/MAMP/Library/bin
```

### ■(MAMP)MySQLへの接続

ターミナルを起動しただけでは、MySQLへは接続していません。
明示的に接続してあげる必要があります。
ターミナルで、下記の様に入力し、Enterを押してください。

``` MySQL
MySQLへの接続:
  ./mysql -h localhost -u root -p
```

「-」が付いている部分はオプションを意味します。

* -h
ホスト（アドレス）の指定

* -u
接続アカウント

* -p
パスワード（認証時にrootと入力）

### ■(MAMP)アカウントの作成

MySQLが接続できたら、自分のアカウントを作成しましょう。
アカウント作成は、下記の様に実施します。

**MySQLのアカウント作成：**

* CREATE USER
'ユーザー名'@'localhost'


* IDENTIFIED BY
'パスワード';

入力が終わったら、Enterを押してください。
成功すると、今後はこのアカウントでMySQLへの接続が可能になります。

### ■(MAMP)アカウントの作成

次に、作成したアカウントで利用できるデータベースを作成します。
MySQL自体をデータベースと言いますが、ここで言うデータベースは情報を管理するための大きな括りです。

MySQLの中には、複数のデータベースを作成する事が可能です。

``` MySQL
データベースを作成するSQL文:
  CREATE DATABASE データベース名;
```

### ■(MAMP)データベースの操作権限を設定

先ほど作成したアカウントは、作成したデータベースを操作できません。
アカウントがデータベースを操作できるようになるには、操作権限を設定する必要があります。


``` MySQL
アカウントにデータベースの操作権限を設定:
  GRANT ALL ON データベース名.* TO 'ユーザー名'@'localhost';
```

成功すると、作成したアカウントでデータベースの操作が可能になります。

### ■(MAMP)作成したアカウントで再度ログイン

先ほど作成したアカウントで再度MySQLに接続しなおします。
MySQLとの接続を切るには、exitコマンドを利用してください。

``` MySQL
MySQLの切断:
  exit;
```

切断したら、rootと同様に先ほど作成したアカウント名でMySQLへ接続してください。

### ■(MAMP)データベースの選択

ログインしたら、操作するデータベースを選択します。
先ほど作成したデータベースを選択しましょう。
選択のコマンドは、下記です。

``` MySQL
データベースの選択:
  USE データベース名;
```

### ■(MAMP)SQL文の実施

データベースを選択したら、SQL文を駆使してデータの操作を行いましょう。
まず、テーブルを作成してみてください。
テーブルを作成するSQL文は下記です。

``` MySQL
テーブルを作成するSQL文:
  CREATE TABLE
    テーブル名
  (カラム名 データ型, カラム名 データ型, …);
```

カラムの数に制限はありません。
必要なだけカラムを作成する事が可能です。

&nbsp;

---

### ■色々なSQL文を実行してみよう！

あとは、INSERTやUPDATEなどSQL文を実行して必要なデータを投入しましょう。
また、他にもSQL文には色々な命令が存在します。自分で調べて使ってみましょう！
