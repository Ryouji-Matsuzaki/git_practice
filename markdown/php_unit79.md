## 組み込み関数
### ファイル編

### ■ファイル操作

PHPのファイル操作について説明します。

PHPのファイル操作は、全てサーバー上で行われます。PHPで作成したサイトを利用したからといって、利用者のPCへの操作では無い事に注意してください。

ファイル操作の基本的な流れは、

1. ファイルオープン（fopen）
2. 各ファイル操作
3. ファイルクローズ（fclose）

になります。

また、ファイル操作には読み込み(r)・書き込み(w)・追記(a)のモードが存在します。

### ■fopen/fcloseとfwrite

ファイルのオープン/クローズは、fopen/fclose関数を利用します。ファイル操作は、必ず開けたら閉めるようにしましょう。

そして、書き込みはfwriteを利用します。

**ファイルを操作のため開く（fopen）：**

  * 変数 = foepn(ファイルパス, 操作モード);


**ファイルを閉じる（fclose）：**

  * 変数 = fclose(ファイルポインタ);


**ファイルへ書き込む（fwrite）：**

  * 変数 = fwrite(ファイルポインタ, 書き込む情報);


```php
<?php

// sample.txtへ情報を書き込む処理
// ファイルをオープン。操作モードは、書き込み(w)
// fopenに成功すると、ファイルポインタが
// 失敗すると、falseが返ってきます
$fp = fopen('sample.txt', 'w');
// きちんと開けたら
if ($fp != false) {
    // ファイルに書き込み
    fwrite($fp, 'This is a test!');
    // 書いたら、閉じる
    fclose($fp);
}

```

### ■ファイルの読み出し

今度は、ファイルから情報を読み出してみましょう。読みだす際も同様にfopen/fcloseの流れが必須です。

**ファイルから１行読み出す（fgets）：**

  * 変数 = fgets(ファイルポインタ);


```php
<?php

// sample.txtから情報を読み出す処理
// ファイルをオープン。操作モードは、読み込み(r)
$fp = fopen('sample.txt', 'r');
// きちんと開けたら
if ($fp != false) {
    // １行読み出し
    echo fgets($fp);
    // 書いたら、閉じる
    fclose($fp);
}

```

### ■書き込みと追記

ファイルをオープンする際に、書き込み(w)と追記(a)を指定する事が可能です。どちらも情報を書くモードですが、書き方に違いがあります。

* 書き込み（w）

  * ファイルの先頭から上書きします。


* 追記（a）

  * 既に書かれている情報へ追記します。

都度、適切な操作モードを指定しましょう。



```php
<?php

// sample.txtへ情報の追記処理
// ファイルをオープン。操作モードは、追記(a)
// fopenに成功すると、ファイルポインタが
// 失敗すると、falseが返ってきます
$fp = fopen('sample.txt', 'a');
// きちんと開けたら
if ($fp != false) {
    // ファイルに追記
    fwrite($fp, 'Enjoy programming!!');
    // 書いたら、閉じる
    fclose($fp);
}
```

### ■ファイルの一括読み/書き

ファイルを部分的に読み出したり、１行書き込んだりといった処理とは別に、ファイルを一括で読み込み/書き込みする関数が存在します。

**一括読み込み（file_get_contents）：**

  * 変数 = file_get_contents(ファイルパス);


**一括書き込み（file_put_contents）:**

  * 変数 = file_put_contents(ファイルパス, 中身);

これらの関数は、オープン/クローズの処理は不要ですが、１行ずつ処理するなどの細かな対応には適しません。必要に応じて使い分けましょう。

```php
<?php
// 書きこむテキストを用意
$text = 'Here is GEEK JOB. Let\'s learn programming!!';

// 一括書き込み
file_put_contents('sample2.txt', $text);

// 一括読み込み
echo file_get_contents('sample2.txt');

```
